(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{128:function(e,t){e.exports={host:"https://morning-escarpment-37129.herokuapp.com/"}},133:function(e,t,a){},259:function(e,t,a){},260:function(e,t,a){},452:function(e,t,a){},453:function(e,t,a){},467:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(206),r=a.n(c),o=a(24),i=a(10),u=a(22),l=a.n(u),j=a(40),b=a(52),d=a(14),m=a(15),x=a(468),h=a(469),O=a(209),p=a(471),f=a(472),g=(a(133),a(44)),v=a.n(g),y="https://morning-escarpment-37129.herokuapp.com/api",N="setsomething",w="SET_AUTH";var k=function(e){e?v.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete v.a.defaults.headers.common.Authorization},C=function(e,t){var a=t.type,s=t.payload,n=s.isAuthorization,c=(s.authLoading,s.user);return a===w?Object(d.a)(Object(d.a)({},e),{},{authLoading:!1,isAuthorization:n,user:c}):Object(d.a)({},e)},S=a(1),L=Object(s.createContext)();function T(e){var t=e.children,a=Object(s.useReducer)(C,{authLoading:!0,isAuthorization:!1,user:null}),n=Object(m.a)(a,2),c=n[0],r=n[1],o=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setsomething&&k(localStorage.setsomething),e.prev=1,e.next=4,v.a.get("".concat(y,"/auth"));case 4:(t=e.sent).data.success&&r({type:w,payload:{isAuthorization:!0,user:t.data.user}}),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(1),r({type:w,payload:{isAuthorization:!1,user:null}}),localStorage.removeItem(N),k(null),console.log(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){return o()}),[]);var i=function(){var e=Object(j.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("".concat(y,"/auth/login"),t);case 3:return(a=e.sent).data.success&&localStorage.setItem(N,a.data.accessToken),e.next=7,o();case 7:return e.abrupt("return",a.data);case 10:if(e.prev=10,e.t0=e.catch(0),!e.t0.response.data){e.next=16;break}return e.abrupt("return",e.t0.response.data);case 16:return e.abrupt("return",{success:!1,message:e.t0.message});case 17:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(j.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("".concat(y,"/auth/register"),t);case 3:return(a=e.sent).data.success&&localStorage.setItem(N,a.data.accessToken),e.next=7,o();case 7:return e.abrupt("return",a.data);case 10:if(e.prev=10,e.t0=e.catch(0),localStorage.removeItem(N),!e.t0.response.data){e.next=17;break}return e.abrupt("return",e.t0.response.data);case 17:return e.abrupt("return",{success:!1,message:e.t0.message});case 18:console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),b={LoginUser:i,authState:c,Register:u};return Object(S.jsx)(L.Provider,{value:b,children:t})}function A(){var e=Object(i.g)(),t=Object(s.useContext)(L).LoginUser,a=Object(s.useState)({username:"",password:""}),n=Object(m.a)(a,2),c=n[0],r=n[1],u=c.username,g=c.password,v=function(e){r(Object(d.a)(Object(d.a)({},c),{},Object(b.a)({},e.target.name,e.target.value)))},y=function(){var a=Object(j.a)(l.a.mark((function a(s){var n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s.preventDefault(),a.prev=1,a.next=4,t(c);case 4:(n=a.sent).success?e.push("/dashboard"):alert(n.message),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0.message);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}();return Object(S.jsxs)(x.a,{children:[Object(S.jsx)("p",{className:"h1 d-flex justify-content-center mt-5",children:Object(S.jsx)("i",{className:"fa fa-child text-primary",children:" socked book"})}),Object(S.jsxs)(h.a,{children:[Object(S.jsx)(O.a,{xl:3,sm:3,md:3}),Object(S.jsx)(O.a,{xl:6,sm:6,md:6,className:"bg-light rounded-3 marginFormTop",children:Object(S.jsxs)(p.a,{onSubmit:y,children:[Object(S.jsxs)(p.a.Group,{className:"mb-3",children:[Object(S.jsx)(p.a.Label,{children:Object(S.jsx)("i",{className:"fa fa-user"})}),Object(S.jsx)(p.a.Control,{type:"text",placeholder:"Enter username",value:u,onChange:v,name:"username",required:!0})]}),Object(S.jsxs)(p.a.Group,{className:"mb-3",children:[Object(S.jsx)(p.a.Label,{children:Object(S.jsx)("i",{className:"fa fa-lock"})}),Object(S.jsx)(p.a.Control,{type:"password",placeholder:"Password",value:g,onChange:v,name:"password",required:!0})]}),Object(S.jsxs)(O.a,{className:"bg-primary d-flex justify-content-center mt-3 rounded-3",children:[" ",Object(S.jsx)(f.a,{variant:"primary",type:"submit",children:Object(S.jsx)("i",{className:"fa fa-sign-in",children:" Login"})})]}),Object(S.jsx)(O.a,{className:"mt-3 bg-success d-flex justify-content-center rounded-3",children:Object(S.jsx)(o.b,{to:"/register",className:"btn btn-success",children:Object(S.jsx)("i",{className:"fa fa-user-plus",children:" Register"})})})]})}),Object(S.jsx)(O.a,{xl:3,sm:3,md:3})]})]})}var E=function(){return Object(S.jsx)(i.a,{to:"/login"})};function z(){var e=Object(i.g)(),t=Object(s.useContext)(L).Register,a=Object(s.useState)({username:"",password:"",confirmpassword:""}),n=Object(m.a)(a,2),c=n[0],r=n[1],u=c.username,g=c.password,v=c.confirmpassword,y=function(e){r(Object(d.a)(Object(d.a)({},c),{},Object(b.a)({},e.target.name,e.target.value)))},N=function(){var a=Object(j.a)(l.a.mark((function a(s){var n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s.preventDefault(),g==v){a.next=4;break}return alert("Password does not match"),a.abrupt("return");case 4:return a.prev=4,a.next=7,t(c);case 7:n=a.sent,console.log(n),n.success&&(alert("Register successfully"),e.push("/login")),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(4),console.log(a.t0.message);case 15:case"end":return a.stop()}}),a,null,[[4,12]])})));return function(e){return a.apply(this,arguments)}}();return Object(S.jsxs)(x.a,{children:[Object(S.jsx)("p",{className:"h1 d-flex justify-content-center mt-5",children:Object(S.jsx)("i",{className:"fa fa-child text-primary",children:" socked book"})}),Object(S.jsxs)(h.a,{children:[Object(S.jsx)(O.a,{xl:3,sm:3,md:3}),Object(S.jsx)(O.a,{xl:6,sm:6,md:6,className:"bg-light rounded-3 marginFormTop",children:Object(S.jsxs)(p.a,{onSubmit:N,children:[Object(S.jsxs)(p.a.Group,{className:"mb-3",children:[Object(S.jsx)(p.a.Label,{children:Object(S.jsx)("i",{className:"fa fa-user"})}),Object(S.jsx)(p.a.Control,{type:"text",placeholder:"Enter username",value:u,onChange:y,name:"username",required:!0})]}),Object(S.jsxs)(p.a.Group,{className:"mb-3",children:[Object(S.jsx)(p.a.Label,{children:Object(S.jsx)("i",{className:"fa fa-lock"})}),Object(S.jsx)(p.a.Control,{type:"password",placeholder:"Password",value:g,onChange:y,name:"password",required:!0})]}),Object(S.jsx)(p.a.Group,{className:"mb-3",children:Object(S.jsx)(p.a.Control,{type:"password",placeholder:"Confirm Password",value:v,onChange:y,name:"confirmpassword",required:!0})}),Object(S.jsxs)(O.a,{className:"bg-primary d-flex justify-content-center mt-3 rounded-3",children:[" ",Object(S.jsx)(f.a,{variant:"primary",type:"submit",children:Object(S.jsx)("i",{className:"fa fa-user-plus",children:"Register"})})]}),Object(S.jsx)(O.a,{className:"mt-3 bg-success d-flex justify-content-center rounded-3",children:Object(S.jsxs)(o.b,{to:"/login",className:"btn btn-success",children:["Already have account ? Login ",Object(S.jsx)("i",{className:"fa fa-universal-access"})]})})]})}),Object(S.jsx)(O.a,{xl:3,sm:3,md:3})]})]})}var P=a(210),R=a(470),F=(a(259),["component"]),I=function(e){var t=e.component,a=Object(P.a)(e,F),n=Object(s.useContext)(L).authState,c=n.authLoading,r=n.isAuthorization;return c?Object(S.jsx)("div",{className:"center-screen position-fixed",children:Object(S.jsx)(R.a,{animation:"border"})}):Object(S.jsx)(i.b,Object(d.a)(Object(d.a)({},a),{},{render:function(e){return r?Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(t,Object(d.a)(Object(d.a)({},a),e))}):Object(S.jsx)(i.a,{to:"/login"})}}))};a(260);function M(){var e=Object(s.useState)(""),t=Object(m.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(""),r=Object(m.a)(c,2),i=r[0],u=r[1];return Object(S.jsx)(x.a,{className:"w-100 h-100 Top",fluid:!0,children:Object(S.jsxs)(h.a,{children:[Object(S.jsx)(O.a,{xl:3,sm:3,md:3}),Object(S.jsxs)(O.a,{xl:6,sm:6,md:6,className:"w-100 text-center text-black",children:[Object(S.jsx)("h1",{children:"Chat room"}),Object(S.jsx)("div",{children:Object(S.jsx)("input",{placeholder:"Nickname",className:"btn btn-outline-primary",type:"text",onChange:function(e){return n(e.target.value)}})}),Object(S.jsx)("div",{children:Object(S.jsx)("input",{placeholder:"Room",className:"mt-3 btn btn-outline-primary ",type:"text",onChange:function(e){return u(e.target.value)}})}),Object(S.jsx)(o.b,{onClick:function(e){return a&&i?null:e.preventDefault()},to:"/chat?name=".concat(a,"&room=").concat(i),children:Object(S.jsxs)(f.a,{className:"btn btn-success mt-3",type:"submit",children:["Connect Room ",Object(S.jsx)("i",{className:"fa fa-sign-in","aria-hidden":"true"})]})})]}),Object(S.jsx)(O.a,{xl:3,sm:3,md:3})]})})}var q,D=a(132),G=a(212),B=a.n(G),U=a(213),J=a.n(U),H=a(128),K=function(e){var t=e.room;return Object(S.jsx)(O.a,{xl:12,sm:12,md:12,className:"d-flex justity-content-start  bg-primary text-center ",children:Object(S.jsxs)("h1",{children:[Object(S.jsxs)("i",{className:"fa fa-podcast","aria-hidden":"true",children:[" ",t," room"]})," "]})})},_=a(226),Q=(a(452),a(453),function(e){var t=e.message,a=t.text,s=t.user,n=e.name,c=!1;if(a.length>100)return"Error: please type less than 100 word ";var r=n.trim().toLowerCase();return s===r&&(c=!0),c?Object(S.jsx)("div",{className:"d-flex justify-content-end",children:Object(S.jsx)(x.a,{children:Object(S.jsx)(h.a,{children:Object(S.jsx)(O.a,{xl:12,sm:12,md:12,className:"d-flex justify-content-start w-100 text-wrap",children:Object(S.jsxs)("div",{className:"btn text-black",children:[r," : ",a]})})})})}):s?Object(S.jsx)("div",{className:"d-flex justify-content-end ",children:Object(S.jsx)(x.a,{children:Object(S.jsx)(h.a,{children:Object(S.jsx)(O.a,{xl:12,sm:12,md:12,className:"d-flex justify-content-start w-100 text-wrap",children:Object(S.jsxs)("div",{className:"btn text-black",children:[s," : ",a]})})})})}):Object(S.jsx)("div",{className:"d-flex justify-content-end ",children:Object(S.jsx)(x.a,{children:Object(S.jsx)(h.a,{children:Object(S.jsx)(O.a,{xl:12,sm:12,md:12,className:"d-flex justify-content-start w-100 text-wrap",children:Object(S.jsx)("div",{className:"btn text-black",children:a})})})})})}),V=function(e){var t=e.messages,a=e.name;return Object(S.jsx)(O.a,{xl:12,md:12,sm:12,className:"messages ",children:Object(S.jsx)(_.a,{children:t.map((function(e,t){return Object(S.jsx)("div",{children:Object(S.jsx)(Q,{message:e,name:a})},t)}))})})},W=(a(454),function(e){var t=e.setMessage,a=e.sendMessage,s=e.message;return Object(S.jsx)(O.a,{xl:12,sm:12,md:12,className:"mt-5",children:Object(S.jsx)(p.a,{className:"d-flex",children:Object(S.jsx)("input",{className:"border rounded-3 w-100",type:"text",placeholder:"Type a message...",value:s,onChange:function(e){var s=e.target.value;a&&t(s)},onKeyPress:function(e){return"Enter"===e.key?a(e):null}})})})}),X=(a(455),function(e){var t=e.location,a=Object(s.useState)(""),n=Object(m.a)(a,2),c=n[0],r=n[1],o=Object(s.useState)(""),i=Object(m.a)(o,2),u=i[0],l=i[1],j=Object(s.useState)(""),b=Object(m.a)(j,2),d=b[0],O=b[1],p=Object(s.useState)([]),f=Object(m.a)(p,2),g=f[0],v=f[1];Object(s.useEffect)((function(){var e=B.a.parse(t.search),a=e.name,s=e.room;return q=J()(H.host),l(s),r(a),q.emit("join",{name:a,room:s},(function(){})),function(){q.emit("disconnect"),q.off()}}),[H.host,t.search]);var y,N,w;return y=function(){q.on("message",(function(e){v([].concat(Object(D.a)(g),[e]))}))},N=[g],w=300,Object(s.useEffect)((function(){var e=setTimeout((function(){return y()}),w);return function(){return clearTimeout(e)}}),[].concat(Object(D.a)(N||[]),[w])),Object(S.jsx)(x.a,{className:"outerContainer ",children:Object(S.jsxs)(h.a,{children:[Object(S.jsx)(K,{room:u}),Object(S.jsx)(V,{messages:g,name:c}),Object(S.jsx)(W,{message:d,setMessage:O,sendMessage:function(e){e.preventDefault(),d&&q.emit("sendMessage",d,(function(){O("")}))}})]})})});var Y=function(){return Object(S.jsx)(T,{children:Object(S.jsx)(o.a,{children:Object(S.jsxs)(i.d,{children:[Object(S.jsx)(i.b,{exact:!0,path:"/",component:E}),Object(S.jsx)(i.b,{exact:!0,path:"/login",component:A}),Object(S.jsx)(i.b,{exact:!0,path:"/register",component:z}),Object(S.jsx)(I,{exact:!0,path:"/dashboard",component:M}),Object(S.jsx)(I,{path:"/chat",component:X})]})})})},Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,473)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};r.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(Y,{})}),document.getElementById("root")),Z()}},[[467,1,2]]]);
//# sourceMappingURL=main.46df3298.chunk.js.map